{
    "type": "Ext.window.Window",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "autoShow": true,
        "closable": false,
        "designer|userAlias": "loginwindows",
        "designer|userClassName": "LoginWindows",
        "draggable": false,
        "height": 341,
        "layout": "fit",
        "resizable": false,
        "title": "Inicio de Sesión",
        "titleAlign": "center",
        "width": 326
    },
    "configAlternates": {
        "autoShow": "boolean",
        "closable": "boolean",
        "designer|initialView": "boolean",
        "designer|userAlias": "string",
        "designer|userClassName": "string",
        "draggable": "boolean",
        "height": "auto",
        "layout": "string",
        "resizable": "boolean",
        "title": "string",
        "titleAlign": "string",
        "width": "auto"
    },
    "name": "MyWindow",
    "designerId": "83ad0399-a6cd-47fb-8b4f-a0ebe8504869",
    "viewControllerInstanceId": "0c6029c6-022a-4bae-babd-ee1c881113de",
    "viewModelInstanceId": "980654f5-765b-48b0-968c-4464c71f011b",
    "cn": [
        {
            "type": "Ext.form.Panel",
            "reference": {
                "name": "dockedItems",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "bodyPadding": 10,
                "dock": "top",
                "itemId": "loginLogo",
                "layout": "center",
                "method": "POST",
                "url": "api/login/login"
            },
            "configAlternates": {
                "bodyPadding": "auto",
                "itemId": "string",
                "method": "string",
                "url": "string",
                "dock": "string",
                "bodyStyle": "string",
                "layout": "string"
            },
            "name": "MyForm",
            "designerId": "f6e4ca8b-0691-459e-bac4-574de7844019",
            "cn": [
                {
                    "type": "Ext.container.Container",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "designer|snapToGrid": 10,
                        "dock": null,
                        "layout": "absolute"
                    },
                    "configAlternates": {
                        "layout": "string",
                        "height": "auto",
                        "designer|snapToGrid": "number",
                        "dock": "string"
                    },
                    "name": "MyContainer",
                    "designerId": "938d548a-b6c8-46d3-8139-b1deac0b7618",
                    "cn": [
                        {
                            "type": "Ext.Img",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dock": null,
                                "height": 80,
                                "src": "resources/images/cxcandes.jpg",
                                "width": 120
                            },
                            "configAlternates": {
                                "height": "auto",
                                "src": "uri",
                                "width": "auto",
                                "dock": "string"
                            },
                            "name": "MyImg",
                            "designerId": "21319a20-cc4d-4468-81eb-2b761c0e7906"
                        }
                    ]
                }
            ]
        },
        {
            "type": "Ext.form.Panel",
            "reference": {
                "name": "dockedItems",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "bodyPadding": 10,
                "defaultButton": "btnIngresar",
                "dock": "bottom",
                "itemId": "loginForm",
                "layout": "form",
                "method": "POST",
                "url": "api/login/login"
            },
            "configAlternates": {
                "bodyPadding": "auto",
                "itemId": "string",
                "method": "string",
                "url": "string",
                "style": "object",
                "bodyStyle": "object",
                "dock": "string",
                "layout": "string",
                "defaultButton": "string"
            },
            "name": "MyForm2",
            "designerId": "32bffde0-cc65-4329-8771-a103f8a9262b",
            "cn": [
                {
                    "type": "Ext.form.field.Text",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "allowBlank": false,
                        "emptyText": "Usuario",
                        "fieldLabel": "<img src=\"resources/images/usuario.png\"/>",
                        "fieldStyle": "font-weight: bold",
                        "id": "txtUsuario",
                        "labelStyle": "",
                        "name": "usuario"
                    },
                    "configAlternates": {
                        "fieldLabel": "string",
                        "layout|anchor": "string",
                        "name": "string",
                        "allowBlank": "boolean",
                        "msgTarget": "string",
                        "emptyText": "string",
                        "fieldStyle": "string",
                        "labelStyle": "string",
                        "id": "string"
                    },
                    "name": "MyTextField",
                    "designerId": "47dae8c1-5ba4-400a-9ecc-ef5ffd6321bb"
                },
                {
                    "type": "Ext.form.field.Text",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "allowBlank": false,
                        "emptyText": "Contraseña",
                        "fieldLabel": "<img src=\"resources/images/password.png\"/>",
                        "fieldStyle": "font-weight: bold",
                        "id": "txtContra",
                        "inputType": "password",
                        "name": "contrasena"
                    },
                    "configAlternates": {
                        "fieldLabel": "string",
                        "layout|anchor": "string",
                        "name": "string",
                        "allowBlank": "boolean",
                        "inputType": "string",
                        "emptyText": "string",
                        "fieldStyle": "string",
                        "id": "string"
                    },
                    "name": "MyTextField1",
                    "designerId": "79fc0307-7a5f-496c-a27f-a28813c1c149"
                },
                {
                    "type": "Ext.container.Container",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "height": 57,
                        "layout": "center",
                        "width": 10
                    },
                    "configAlternates": {
                        "layout": "string",
                        "height": "auto",
                        "width": "auto"
                    },
                    "name": "MyContainer",
                    "designerId": "0aa4a51f-9911-4268-b87a-2e4ec75256ce",
                    "cn": [
                        {
                            "type": "Ext.button.Button",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "itemId": "btnIngresar",
                                "reference": "btnIngresar",
                                "text": "Ingresar",
                                "width": 283
                            },
                            "configAlternates": {
                                "itemId": "string",
                                "text": "string",
                                "width": "auto",
                                "reference": "string"
                            },
                            "name": "MyButton",
                            "designerId": "fbb45501-d72a-4533-ad93-7c3a8b13179f",
                            "cn": [
                                {
                                    "type": "viewcontrollereventbinding",
                                    "reference": {
                                        "name": "listeners",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "fn": "onBtnIngresarClick1",
                                        "implHandler": [
                                            "",
                                            "var me = this,",
                                            "    mainViewport,",
                                            "    loginForm;",
                                            "",
                                            "var usu = Ext.getCmp('txtUsuario').getValue();",
                                            "var pass = Ext.getCmp('txtContra').getValue();",
                                            "loginForm= me.view.down(\"#loginForm\");",
                                            "loginForm= loginForm.getForm();",
                                            "",
                                            "if (loginForm.isValid()){",
                                            "    me.view.mask(\"Iniciando Sesión...Espere!!\");",
                                            "",
                                            "   Ext.getStore('LoginStore').load({",
                                            "        params:{",
                                            "            'usu': usu,",
                                            "            'pass': pass",
                                            "",
                                            "        },",
                                            "",
                                            "       callback: function (records, operation, success){",
                                            "",
                                            "           if(success === true){",
                                            "             //  if(records.length === 1){",
                                            "               //    console.log(\"CA\");",
                                            "                   if(records[0].data.tipo != 'A'){",
                                            "                        Ext.MessageBox.show({",
                                            "                                title: 'Login',",
                                            "                                icon: Ext.MessageBox.WARNING,",
                                            "                                msg: 'Acceso denegado, Módulo exclusivo para Auditoria...',",
                                            "                                buttons: Ext.MessageBox.OK",
                                            "                            });",
                                            "                       me.view.unmask();",
                                            "",
                                            "                   }else{",
                                            "                   records = Ext.getStore('LoginStore').data.items[0];",
                                            "                   Ext._nombre = records.data.nombre_completo;",
                                            "                   Ext._tipo   = records.data.tipo;",
                                            "                   Ext._idusr   = records.data.id_usuario;",
                                            "                   Ext._conteo  = 1;",
                                            "                   mainViewport =  new cartera.view.MainViewport();",
                                            "                   mainViewport.show();",
                                            "                   me.view.destroy();",
                                            "",
                                            "",
                                            "                   }",
                                            "",
                                            "               }else{",
                                            "                    Ext.MessageBox.show({",
                                            "                        title: 'Login',",
                                            "                        icon: Ext.MessageBox.INFO,",
                                            "                        msg: 'Usuario o contraseña incorrectos.',",
                                            "                        buttons: Ext.MessageBox.OK",
                                            "                    });",
                                            "",
                                            "                    me.view.unmask();",
                                            "",
                                            "               }",
                                            "",
                                            "       }",
                                            "",
                                            "   });",
                                            "",
                                            "",
                                            "  /*loginForm.submit({",
                                            "",
                                            "        success: function(form, action){",
                                            "            me.view.unmask();",
                                            "            Ext._.usuario =action.result.records;",
                                            "            mainViewport =  new invcaf.view.MainViewport();",
                                            "            mainViewport.show();",
                                            "            me.view.destroy();",
                                            "        },",
                                            "",
                                            "        failure: function(form, action){",
                                            "            var mensaje;",
                                            "",
                                            "            me.view.unmask();",
                                            "            if (action.result){",
                                            "                //si la respuesta dle servidor es valida use mensaje dle servidor",
                                            "                mensaje = action.result.message;",
                                            "            } else {",
                                            "                //si la respuesta del servidor es invalida se usa el mensaje general",
                                            "                mensaje = \"Error al inciar sesion\";",
                                            "            }",
                                            "",
                                            "",
                                            "            Ext.Msg.show({",
                                            "                title: 'Mensaje del Sistema',",
                                            "                message: mensaje,",
                                            "                buttons: Ext.Msg.OK,",
                                            "                icon: Ext.Msg.ERROR",
                                            "            });",
                                            "        }",
                                            "",
                                            "    }); */",
                                            "",
                                            "  //  console.log(Ext._.usuario);",
                                            "}",
                                            ""
                                        ],
                                        "name": "click",
                                        "scope": "me"
                                    },
                                    "configAlternates": {
                                        "fn": "string",
                                        "implHandler": "code",
                                        "name": "string",
                                        "scope": "string"
                                    },
                                    "name": "onBtnIngresarClick1",
                                    "designerId": "bb2bac1f-f578-47e7-b53f-770ee88019a0"
                                }
                            ]
                        }
                    ]
                }
            ]
        }
    ]
}