{
    "type": "Ext.window.Window",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "autoShow": true,
        "designer|userAlias": "windowGenerar",
        "designer|userClassName": "windowGenerar",
        "height": 277,
        "id": "winGen",
        "itemId": "winGen",
        "modal": true,
        "resizable": false,
        "title": "Generar Archivo para Inventario Físico",
        "width": 349
    },
    "configAlternates": {
        "designer|userAlias": "string",
        "designer|userClassName": "string",
        "height": "auto",
        "modal": "boolean",
        "title": "string",
        "width": "auto",
        "autoShow": "boolean",
        "resizable": "boolean",
        "id": "string",
        "itemId": "string"
    },
    "name": "NuevaPlazaWindow1",
    "designerId": "2cc5801d-2e46-47a1-a000-5667dd3b38b9",
    "viewControllerInstanceId": "c9120b45-85de-432d-8e8e-5e0a23e61d7a",
    "viewModelInstanceId": "eefa62b0-c98b-4049-b79a-5bac8018cab3",
    "cn": [
        {
            "type": "Ext.form.Panel",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "bodyPadding": 10,
                "itemId": "formGenArch"
            },
            "configAlternates": {
                "bodyPadding": "auto",
                "itemId": "string"
            },
            "name": "MyForm1",
            "designerId": "6dc7833a-9b57-4859-923d-c0769f6e951c",
            "cn": [
                {
                    "type": "Ext.form.field.Text",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fieldLabel": "Fecha",
                        "id": "fecha",
                        "layout|anchor": "100%",
                        "name": "fecha",
                        "readOnly": true
                    },
                    "configAlternates": {
                        "allowBlank": "boolean",
                        "fieldLabel": "string",
                        "layout|anchor": "string",
                        "name": "string",
                        "id": "string",
                        "readOnly": "boolean"
                    },
                    "name": "MyTextField3",
                    "designerId": "c287821f-f3a6-476b-9ce3-f43f040b673f"
                },
                {
                    "type": "Ext.form.field.Text",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fieldLabel": "Archivo Fisico",
                        "id": "fisico",
                        "layout|anchor": "100%",
                        "name": "fisico",
                        "readOnly": true
                    },
                    "configAlternates": {
                        "allowBlank": "boolean",
                        "fieldLabel": "string",
                        "layout|anchor": "string",
                        "name": "string",
                        "id": "string",
                        "readOnly": "boolean"
                    },
                    "name": "MyTextField4",
                    "designerId": "5f4b89de-5aaf-4287-8cd4-802cbeb79773"
                },
                {
                    "type": "Ext.form.RadioGroup",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fieldLabel": "Items"
                    },
                    "configAlternates": {
                        "fieldLabel": "string"
                    },
                    "name": "MyRadioGroup1",
                    "designerId": "05a2995b-2469-4b10-9d51-89c47c8f06e5",
                    "cn": [
                        {
                            "type": "Ext.form.field.Radio",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "boxLabel": "Existencia",
                                "checked": true,
                                "fieldLabel": null,
                                "id": "exis",
                                "value": [
                                    "1"
                                ]
                            },
                            "configAlternates": {
                                "boxLabel": "string",
                                "checked": "boolean",
                                "fieldLabel": "string",
                                "id": "string",
                                "value": "object"
                            },
                            "name": "MyRadio2",
                            "designerId": "022e0d4b-3b0d-4c3b-b758-8d4fe42eb683"
                        },
                        {
                            "type": "Ext.form.field.Radio",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "boxLabel": "Todos",
                                "checked": true,
                                "fieldLabel": null,
                                "id": "todos",
                                "value": [
                                    "2"
                                ]
                            },
                            "configAlternates": {
                                "boxLabel": "string",
                                "checked": "boolean",
                                "fieldLabel": "string",
                                "id": "string",
                                "value": "object"
                            },
                            "name": "MyRadio3",
                            "designerId": "074b524b-3794-49e3-a801-d576c33c7813"
                        }
                    ]
                },
                {
                    "type": "Ext.ProgressBar",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "id": "proBar"
                    },
                    "configAlternates": {
                        "id": "string"
                    },
                    "name": "MyProgressBar",
                    "designerId": "83fc1791-3a50-4581-a89c-ee4935653a6f"
                },
                {
                    "type": "Ext.toolbar.Toolbar",
                    "reference": {
                        "name": "dockedItems",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "dock": "bottom"
                    },
                    "configAlternates": {
                        "dock": "string"
                    },
                    "name": "MyToolbar",
                    "designerId": "d849cc44-4a99-49b1-9d27-ac73a72b93db",
                    "cn": [
                        {
                            "type": "Ext.button.Button",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "height": 32,
                                "icon": "resources/images/ok.png",
                                "layout|flex": null,
                                "width": 160
                            },
                            "configAlternates": {
                                "text": "string",
                                "height": "auto",
                                "icon": "string",
                                "layout|flex": "number",
                                "width": "auto"
                            },
                            "name": "MyButton4",
                            "designerId": "d169ec76-8b77-44dc-893b-e21ded9dee13",
                            "cn": [
                                {
                                    "type": "viewcontrollereventbinding",
                                    "reference": {
                                        "name": "listeners",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "fn": "onbtnGuardar",
                                        "implHandler": [
                                            "        var record1, record2, store;",
                                            "        var data_jsonAr = [];",
                                            "        var ctrl = this,",
                                            "            storeGenerar = Ext.getStore(\"GenerarStore\"),",
                                            "            record;",
                                            "           // rec;",
                                            "            record = storeGenerar;",
                                            "",
                                            "        var existe= Ext.getCmp(\"exis\").checked;",
                                            "        var todos= Ext.getCmp(\"todos\").checked;",
                                            "        var fisico = Ext.getCmp('fisico').getValue();",
                                            "        var p = Ext.getCmp('proBar', {",
                                            "           renderTo: Ext.getBody(),",
                                            "           width: 300",
                                            "        });",
                                            "",
                                            "",
                                            "        p.wait({",
                                            "                   interval: 500, //bar will move fast!",
                                            "                   duration: 100,",
                                            "                   increment: 15,",
                                            "                   text: 'Generando Archivo...',",
                                            "                   scope: this,",
                                            "                   fn: function(){",
                                            "                        p.updateText('Espere un momento!!!!');",
                                            "                    }",
                                            "                });",
                                            "",
                                            "",
                                            "                //Ext.Ajax.request({",
                                            "                //clientValidation: true,",
                                            "                //url: 'api/config/validaArch',",
                                            "                //method: \"POST\",",
                                            "         Ext.getStore('ConfigStore').load({",
                                            "               callback: function (records, operation, success){",
                                            "",
                                            "                  //var x = Ext.getStore('ConfigStore').data.items[0];",
                                            "",
                                            "",
                                            "                   //console.log(records[0].data.nom_usuario);",
                                            "",
                                            "                   if(success === true){",
                                            "                       console.log(success);",
                                            "                            Ext.Ajax.request({",
                                            "                            clientValidation: true,",
                                            "                            url: 'api/generar/crearArch',",
                                            "                            method: \"POST\",",
                                            "                               params: {",
                                            "                               existe: existe,",
                                            "                                todos: todos,",
                                            "                                nombre: Ext._nombre,",
                                            "                                id_usuario: Ext._idusr",
                                            "",
                                            "                            },",
                                            "                           success: function(rec, op) {",
                                            "",
                                            "                             Ext.MessageBox.show({",
                                            "                                       title: 'Archivo Fisico',",
                                            "                                       icon: Ext.MessageBox.WARNING,",
                                            "                                       msg: 'Archivo Generado con éxito...',",
                                            "                                       buttons: Ext.MessageBox.OK",
                                            "                               });",
                                            "                              button.up('window').close();",
                                            "",
                                            "                            },",
                                            "",
                                            "                            failure: function(rec, op) {",
                                            "                                 Ext.MessageBox.show({",
                                            "                                        title: 'Archivo Fisico',",
                                            "                                        icon: Ext.MessageBox.INFO,",
                                            "                                        msg: 'No se pudo Generar el Archivo!!!.',",
                                            "                                        buttons: Ext.MessageBox.OK",
                                            "                                    });",
                                            "                            }",
                                            "",
                                            "",
                                            "                        });",
                                            "",
                                            "                   }else{",
                                            "                       nombre_usuario = records[0].data.nom_usuario;",
                                            "                       fecha_fisico   = records[0].data.fecha_fisico;",
                                            "                       fecha_fisico = Ext.Date.format(fecha_fisico, 'F j, Y, g:i a');",
                                            "                       Ext.MessageBox.show({",
                                            "                            title: 'Login',",
                                            "                            icon: Ext.MessageBox.INFO,",
                                            "                            msg: 'Ya existe un archivo con fecha '+fecha_fisico+' Generado por '+nombre_usuario,",
                                            "                            buttons: Ext.MessageBox.OK",
                                            "                        });",
                                            "                        button.up('window').close();",
                                            "",
                                            "",
                                            "                   }",
                                            "",
                                            "               }",
                                            "",
                                            "",
                                            "            });",
                                            "",
                                            "",
                                            "",
                                            "             /*  */",
                                            "",
                                            "",
                                            "",
                                            ""
                                        ],
                                        "name": "click",
                                        "scope": "me"
                                    },
                                    "configAlternates": {
                                        "fn": "string",
                                        "implHandler": "code",
                                        "name": "string",
                                        "scope": "string"
                                    },
                                    "name": "onbtnGuardar",
                                    "designerId": "51a756d6-aac1-4df2-bdde-ed716dc69fa5"
                                }
                            ]
                        },
                        {
                            "type": "Ext.button.Button",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "icon": "resources/images/cancel.png",
                                "id": "btnCancelar",
                                "layout|flex": null,
                                "width": 160
                            },
                            "configAlternates": {
                                "text": "string",
                                "icon": "string",
                                "id": "string",
                                "layout|flex": "number",
                                "width": "auto"
                            },
                            "name": "MyButton3",
                            "designerId": "a4eeed03-dbea-4624-b638-d8dd54011b32",
                            "cn": [
                                {
                                    "type": "viewcontrollereventbinding",
                                    "reference": {
                                        "name": "listeners",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "fn": "onbtnCancelar",
                                        "implHandler": [
                                            "button.up('window').close();"
                                        ],
                                        "name": "click",
                                        "scope": "me"
                                    },
                                    "configAlternates": {
                                        "fn": "string",
                                        "name": "string",
                                        "scope": "string",
                                        "implHandler": "code"
                                    },
                                    "name": "onbtnCancelar",
                                    "designerId": "acb96d5a-f4b3-4968-b84a-cd01c60ef517"
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "viewcontrollereventbinding",
                    "reference": {
                        "name": "listeners",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fn": "onFormGenArchAfterRender",
                        "implHandler": [
                            "var dt = new Date();",
                            "var fecha  = Ext.Date.format(dt, 'F j, Y, g:i a');",
                            "var mes    = Ext.Date.format(dt, 'm');",
                            "var ano    = Ext.Date.format(dt, 'y');",
                            "var fisico = 'FICF'+mes+ano;",
                            "Ext.getCmp('fecha').setValue(fecha);",
                            "Ext.getCmp('fisico').setValue(fisico);"
                        ],
                        "name": "afterrender",
                        "scope": "me"
                    },
                    "configAlternates": {
                        "fn": "string",
                        "implHandler": "code",
                        "name": "string",
                        "scope": "string"
                    },
                    "name": "onFormGenArchAfterRender",
                    "designerId": "a54fd1ac-2a94-4469-b437-c6b219dcd6ce"
                }
            ]
        }
    ]
}