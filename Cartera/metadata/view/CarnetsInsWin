{
    "type": "Ext.window.Window",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "autoShow": true,
        "container|align": "stretch",
        "designer|userAlias": "carnetsInswin",
        "designer|userClassName": "CarnetsInsWin",
        "dock": null,
        "height": 206,
        "id": "CarnetsInsWin",
        "itemId": "CarnetsInsWin",
        "layout": "hbox",
        "modal": true,
        "resizable": false,
        "title": "Generar Carnets de Inscripción",
        "width": 441
    },
    "configAlternates": {
        "designer|userAlias": "string",
        "designer|userClassName": "string",
        "height": "auto",
        "modal": "boolean",
        "title": "string",
        "width": "auto",
        "autoShow": "boolean",
        "resizable": "boolean",
        "id": "string",
        "itemId": "string",
        "container|align": "string",
        "dock": "string",
        "layout": "string"
    },
    "name": "CarnetsWin3",
    "designerId": "4e5172e8-16f3-4cb9-a539-60a90b3d38a5",
    "viewControllerInstanceId": "540a91e8-e092-417b-ac4c-864d71639cb2",
    "viewModelInstanceId": "4d8f32a4-bffb-4231-a8b6-837c35ea99a6",
    "cn": [
        {
            "type": "Ext.form.Panel",
            "reference": {
                "name": "dockedItems",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "bodyPadding": 10,
                "dock": "top",
                "height": 161,
                "id": "formCarnetsIns",
                "itemId": "formCarnetsIns",
                "layout": "form",
                "width": 569
            },
            "configAlternates": {
                "bodyPadding": "auto",
                "itemId": "string",
                "height": "auto",
                "width": "auto",
                "id": "string",
                "dock": "string",
                "layout": "string"
            },
            "name": "MyForm1",
            "designerId": "d7e3839f-d9b1-42d6-896f-9ffdcc664de7",
            "cn": [
                {
                    "type": "Ext.form.field.Number",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fieldLabel": "id_alumno",
                        "hidden": true,
                        "hideTrigger": true,
                        "id": "id_alumnoCI",
                        "name": "id_alumno"
                    },
                    "configAlternates": {
                        "allowBlank": "boolean",
                        "fieldLabel": "string",
                        "layout|anchor": "string",
                        "name": "string",
                        "id": "string",
                        "readOnly": "boolean",
                        "validateBlank": "boolean",
                        "hideTrigger": "boolean",
                        "hidden": "boolean"
                    },
                    "name": "MyNumberField2",
                    "designerId": "a7a5fff4-4027-4eef-939c-65a08c79aecf"
                },
                {
                    "type": "Ext.form.field.Number",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fieldLabel": "id_carnet_inscripcion",
                        "hidden": true,
                        "hideTrigger": true,
                        "id": "id_carnet_inscripcionCI",
                        "name": "id_carnet_inscripcion"
                    },
                    "configAlternates": {
                        "allowBlank": "boolean",
                        "fieldLabel": "string",
                        "layout|anchor": "string",
                        "name": "string",
                        "id": "string",
                        "readOnly": "boolean",
                        "validateBlank": "boolean",
                        "hideTrigger": "boolean",
                        "hidden": "boolean"
                    },
                    "name": "MyNumberField5",
                    "designerId": "d5432818-4214-4a32-9b15-e0f40acc6200"
                },
                {
                    "type": "Ext.form.field.Number",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fieldLabel": "id_institucion",
                        "hidden": true,
                        "hideTrigger": true,
                        "id": "id_institucionCI",
                        "name": "id_institucion"
                    },
                    "configAlternates": {
                        "allowBlank": "boolean",
                        "fieldLabel": "string",
                        "layout|anchor": "string",
                        "name": "string",
                        "id": "string",
                        "readOnly": "boolean",
                        "validateBlank": "boolean",
                        "hideTrigger": "boolean",
                        "hidden": "boolean"
                    },
                    "name": "MyNumberField",
                    "designerId": "6e1c8314-e238-4190-b613-2fb1b740a4e3"
                },
                {
                    "type": "Ext.form.field.Number",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fieldLabel": "id_cuota_inscripcion",
                        "hidden": true,
                        "hideTrigger": true,
                        "id": "id_cuotaCI",
                        "name": "id_cuota_inscripcion"
                    },
                    "configAlternates": {
                        "allowBlank": "boolean",
                        "fieldLabel": "string",
                        "layout|anchor": "string",
                        "name": "string",
                        "id": "string",
                        "readOnly": "boolean",
                        "validateBlank": "boolean",
                        "hideTrigger": "boolean",
                        "hidden": "boolean"
                    },
                    "name": "MyNumberField4",
                    "designerId": "83c810e6-86cf-496d-ae3e-d3c847544cee"
                },
                {
                    "type": "Ext.form.field.Number",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fieldLabel": "id_nivel_educativo",
                        "hidden": true,
                        "hideTrigger": true,
                        "id": "id_nivel_educativoCI",
                        "name": "id_nivel_educativo"
                    },
                    "configAlternates": {
                        "allowBlank": "boolean",
                        "fieldLabel": "string",
                        "layout|anchor": "string",
                        "name": "string",
                        "id": "string",
                        "readOnly": "boolean",
                        "validateBlank": "boolean",
                        "hideTrigger": "boolean",
                        "hidden": "boolean"
                    },
                    "name": "MyNumberField13",
                    "designerId": "9bd7c019-ff83-4a47-b00e-af0d7d4a6f4b"
                },
                {
                    "type": "Ext.form.field.Text",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fieldLabel": "grado",
                        "hidden": true,
                        "hideTrigger": true,
                        "id": "gradoCI",
                        "name": "grado"
                    },
                    "configAlternates": {
                        "allowBlank": "boolean",
                        "fieldLabel": "string",
                        "layout|anchor": "string",
                        "name": "string",
                        "id": "string",
                        "readOnly": "boolean",
                        "validateBlank": "boolean",
                        "hideTrigger": "boolean",
                        "hidden": "boolean"
                    },
                    "name": "MyTextField2",
                    "designerId": "f5f6d7f0-2271-4754-8f24-9cd94ef279de"
                },
                {
                    "type": "Ext.form.field.Number",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fieldLabel": "id_status_ciclo",
                        "hidden": true,
                        "hideTrigger": true,
                        "id": "id_status_cicloCI",
                        "name": "id_status_ciclo"
                    },
                    "configAlternates": {
                        "allowBlank": "boolean",
                        "fieldLabel": "string",
                        "layout|anchor": "string",
                        "name": "string",
                        "id": "string",
                        "readOnly": "boolean",
                        "validateBlank": "boolean",
                        "hideTrigger": "boolean",
                        "hidden": "boolean"
                    },
                    "name": "MyNumberField12",
                    "designerId": "030ebdca-6043-4099-ab45-46024489e23a"
                },
                {
                    "type": "Ext.form.field.Number",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fieldLabel": "id_ciclo_escolar",
                        "hidden": true,
                        "hideTrigger": true,
                        "id": "id_ciclo_escolarCI",
                        "name": "id_ciclo_escolar"
                    },
                    "configAlternates": {
                        "allowBlank": "boolean",
                        "fieldLabel": "string",
                        "layout|anchor": "string",
                        "name": "string",
                        "id": "string",
                        "readOnly": "boolean",
                        "validateBlank": "boolean",
                        "hideTrigger": "boolean",
                        "hidden": "boolean"
                    },
                    "name": "MyNumberField3",
                    "designerId": "6b9512bf-321a-4b70-982e-4227c539f6a3"
                },
                {
                    "type": "Ext.form.field.Number",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fieldLabel": "ciclo_escolar",
                        "hidden": true,
                        "hideTrigger": true,
                        "id": "ciclo_escolarCI",
                        "name": "ciclo_escolar"
                    },
                    "configAlternates": {
                        "allowBlank": "boolean",
                        "fieldLabel": "string",
                        "layout|anchor": "string",
                        "name": "string",
                        "id": "string",
                        "readOnly": "boolean",
                        "validateBlank": "boolean",
                        "hideTrigger": "boolean",
                        "hidden": "boolean"
                    },
                    "name": "MyNumberField6",
                    "designerId": "add21fdd-621f-48cc-8e55-7d9f328673df"
                },
                {
                    "type": "Ext.form.RadioGroup",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "container|align": "stretch",
                        "fieldLabel": "Generar por",
                        "id": "rgroupGenerarCI",
                        "layout": "vbox",
                        "width": 396
                    },
                    "configAlternates": {
                        "container|align": "string",
                        "fieldLabel": "string",
                        "id": "string",
                        "layout": "string",
                        "width": "auto"
                    },
                    "name": "MyRadioGroup1",
                    "designerId": "a3903fde-6db2-43bd-941e-64f4b7f99be4",
                    "cn": [
                        {
                            "type": "Ext.form.field.Radio",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "boxLabel": "Alumnos Seleccionados",
                                "checked": true,
                                "fieldLabel": null,
                                "id": "rbtSelecCI"
                            },
                            "configAlternates": {
                                "boxLabel": "string",
                                "checked": "boolean",
                                "fieldLabel": "string",
                                "id": "string"
                            },
                            "name": "MyRadio2",
                            "designerId": "0e0eee9a-129d-4c7d-84c3-9f0e2cd521a4"
                        },
                        {
                            "type": "Ext.form.field.Radio",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "boxLabel": "Todos los Alumnos",
                                "fieldLabel": null,
                                "id": "rbtTodosCI"
                            },
                            "configAlternates": {
                                "boxLabel": "string",
                                "fieldLabel": "string",
                                "id": "string"
                            },
                            "name": "MyRadio3",
                            "designerId": "38749daf-3ce6-4a4c-bd4a-862ad697ad22"
                        }
                    ]
                },
                {
                    "type": "Ext.toolbar.Toolbar",
                    "reference": {
                        "name": "dockedItems",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "dock": "bottom",
                        "height": 69,
                        "width": 900
                    },
                    "configAlternates": {
                        "dock": "string",
                        "height": "auto",
                        "width": "auto"
                    },
                    "name": "MyToolbar",
                    "designerId": "e86b52c9-01bb-4105-a5f4-6e371ba4a732",
                    "cn": [
                        {
                            "type": "Ext.toolbar.Spacer",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dock": "left",
                                "layout|flex": 1
                            },
                            "configAlternates": {
                                "dock": "string",
                                "layout|flex": "number"
                            },
                            "name": "MySpacer",
                            "designerId": "28300fdf-1fa4-4c81-849b-bfb8e264c624"
                        },
                        {
                            "type": "Ext.button.Button",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "height": 45,
                                "icon": "resources/images/guardar.png",
                                "iconAlign": "top",
                                "id": "btnGuardarCI",
                                "layout|flex": null,
                                "scale": "large",
                                "tooltip": "Guardar",
                                "width": 100
                            },
                            "configAlternates": {
                                "text": "string",
                                "height": "auto",
                                "icon": "string",
                                "layout|flex": "number",
                                "width": "auto",
                                "iconAlign": "string",
                                "id": "string",
                                "scale": "string",
                                "tooltip": "string"
                            },
                            "name": "MyButton4",
                            "designerId": "daa8f7ae-7b1d-444b-99c0-1a8c4c9b31af",
                            "cn": [
                                {
                                    "type": "viewcontrollereventbinding",
                                    "reference": {
                                        "name": "listeners",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "fn": "onbtnGuardarCI",
                                        "implHandler": [
                                            "Ext.getCmp('ciclo_escolarCI').setValue(Ext._id_ciclo_escolar);",
                                            "var win = button.up('window'),",
                                            "    form   = Ext.getCmp('formCarnetsIns'),",
                                            "    record = form.getRecord(),",
                                            "    values = form.getValues();",
                                            "",
                                            "",
                                            "if(form.isValid()){",
                                            "         //Agregar Carnet a Todos los Alumnos.",
                                            "         if(Ext.getCmp('rbtTodosCI').getValue()===true){",
                                            "                record = Ext.create('cartera.model.CarnetsInsModel');",
                                            "                console.log(record);",
                                            "                record.set(values);",
                                            "                form.submit({",
                                            "                    params: Ext.JSON.encode(values),",
                                            "                    url: 'api/carnetsins/createall',",
                                            "                    waitMsg: 'Procesando información...',",
                                            "                    success: function() {",
                                            "",
                                            "",
                                            "                        Ext.MessageBox.show({",
                                            "                            title : 'Información',",
                                            "                            buttons : Ext.MessageBox.OK,",
                                            "                            msg : 'El carnet se ha generado',",
                                            "                            icon : Ext.Msg.INFO",
                                            "",
                                            "                        });",
                                            "",
                                            "                        Ext.getStore('CarnetsInsStore').load({",
                                            "                        params:{",
                                            "                            'id_ins': Ext._id_institucion,",
                                            "                            'id_ciclo_escolar': Ext._id_ciclo_escolar",
                                            "                        },",
                                            "                       });",
                                            "",
                                            "",
                                            "                        win.close();",
                                            "                    },",
                                            "                    failure: function() {",
                                            "                        //console.log('FAILURE CAPTURA INSTITUCION');",
                                            "                    }",
                                            "            });",
                                            "",
                                            "",
                                            "         }else{",
                                            "",
                                            "                 // Agregar un solo carnet",
                                            "                 if(Ext.getCmp('id_carnet_inscripcionCI').getValue() > 0 && Ext.getCmp('id_ciclo_escolarCI').getValue() == Ext._id_ciclo_escolar){",
                                            "                    Ext.MessageBox.show({",
                                            "                        title : 'Advertencia',",
                                            "                        buttons : Ext.MessageBox.OK,",
                                            "                        msg : 'Ya existen datos para ese alumno. Verifique...',",
                                            "                        icon : Ext.Msg.ERROR",
                                            "                    });",
                                            "",
                                            "                 }else{",
                                            "",
                                            "",
                                            "                    record = Ext.create('cartera.model.CarnetsInsModel');",
                                            "                    console.log(record);",
                                            "                    record.set(values);",
                                            "                    form.submit({",
                                            "                        params: Ext.JSON.encode(values),",
                                            "                        url: 'api/carnetsins/create',",
                                            "                        waitMsg: 'Procesando información...',",
                                            "                        success: function() {",
                                            "",
                                            "",
                                            "                            Ext.MessageBox.show({",
                                            "                                title : 'Información',",
                                            "                                buttons : Ext.MessageBox.OK,",
                                            "                                msg : 'El carnet se ha generado',",
                                            "                                icon : Ext.Msg.INFO",
                                            "",
                                            "                            });",
                                            "",
                                            "                            Ext.getStore('CarnetsInsStore').load({",
                                            "                            params:{",
                                            "                                'id_ins': Ext._id_institucion,",
                                            "                                'id_ciclo_escolar': Ext._id_ciclo_escolar",
                                            "                            },",
                                            "                           });",
                                            "",
                                            "",
                                            "                            win.close();",
                                            "                        },",
                                            "                        failure: function() {",
                                            "                            //console.log('FAILURE CAPTURA INSTITUCION');",
                                            "                        }",
                                            "                });",
                                            "",
                                            "         }",
                                            "    }",
                                            "",
                                            "}"
                                        ],
                                        "name": "click",
                                        "scope": "me"
                                    },
                                    "configAlternates": {
                                        "fn": "string",
                                        "implHandler": "code",
                                        "name": "string",
                                        "scope": "string"
                                    },
                                    "name": "onbtnGuardarCI",
                                    "designerId": "4a66f515-f899-4062-88ca-1f89961ab609"
                                }
                            ]
                        },
                        {
                            "type": "Ext.button.Button",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "height": 45,
                                "icon": "resources/images/cancelar.png",
                                "iconAlign": "top",
                                "id": "btnCancelarCI",
                                "layout|flex": null,
                                "scale": "large",
                                "tooltip": "Cancelar",
                                "width": 100
                            },
                            "configAlternates": {
                                "text": "string",
                                "icon": "string",
                                "id": "string",
                                "layout|flex": "number",
                                "width": "auto",
                                "height": "auto",
                                "iconAlign": "string",
                                "scale": "string",
                                "tooltip": "string"
                            },
                            "name": "MyButton3",
                            "designerId": "cc1098da-a03a-49ce-a3b9-42209c791620",
                            "cn": [
                                {
                                    "type": "viewcontrollereventbinding",
                                    "reference": {
                                        "name": "listeners",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "fn": "onbtnCancelarCI",
                                        "implHandler": [
                                            "button.up('window').close();"
                                        ],
                                        "name": "click",
                                        "scope": "me"
                                    },
                                    "configAlternates": {
                                        "fn": "string",
                                        "name": "string",
                                        "scope": "string",
                                        "implHandler": "code"
                                    },
                                    "name": "onbtnCancelarCI",
                                    "designerId": "c42760ae-688a-47ba-aae0-4bfabcd0c44b"
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "type": "viewcontrollereventbinding",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "onCarnetsWinAfterRender",
                "implHandler": [
                    "",
                    "",
                    "Ext.getStore('CarnetsInsStore').load({",
                    "                params:{",
                    "                    'id_ins': Ext._id_institucion,",
                    "                    'id_ciclo_escolar': Ext._id_ciclo_escolar,",
                    "                    'id_cuota_inscripcion': Ext._id_cuota_inscripcion",
                    "                    },",
                    "});",
                    "",
                    "Ext.getStore('cmbTipoMovimientoStore').load({",
                    "                params:{",
                    "                    'id_ins': Ext._id_institucion",
                    "",
                    "                    },",
                    "});",
                    "",
                    "Ext.getStore('cmbMesesCicloStore').load({",
                    "                params:{",
                    "                    'id_ins': Ext._id_institucion",
                    "",
                    "                    },",
                    "});",
                    "",
                    "",
                    ""
                ],
                "name": "afterrender",
                "scope": "me"
            },
            "configAlternates": {
                "fn": "string",
                "implHandler": "code",
                "name": "string",
                "scope": "string"
            },
            "name": "onCarnetsWinAfterRender",
            "designerId": "57b86858-93bc-4de4-bdb6-e23c4708e75b"
        }
    ]
}