/*
 * File: app/view/MainViewportViewController.js
 *
 * This file was generated by Sencha Architect
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 6.5.x Classic library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 6.5.x Classic. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('cartera.view.MainViewportViewController', {
    extend: 'Ext.app.ViewController',
    alias: 'controller.mainviewport',

    onComboboxChange: function(field, newValue, oldValue, eOpts) {

        var lengthRecord = field.lastSelectedRecords;
        //console.log(lengthRecord);

        if(lengthRecord !== null){
            Ext._imagen = lengthRecord[0].data.ruta_logo;
            Ext._id_institucion   = lengthRecord[0].data.id_institucion;
            Ext._razon_social   = lengthRecord[0].data.razon_social;
            Ext.getStore('CiclosEscolaresStore').load({
                params:{
                    'id_ins': Ext._id_institucion
                },
                callback: function (records, operation, success){
                    if(success === false){
                        Ext.getCmp('cicloCmb').setValue('');
                        Ext.getCmp('cicloCmb').disabled = true;
                        Ext.MessageBox.show({
                            title: 'Información',
                            icon: Ext.MessageBox.WARNING,
                            msg: 'No existen ningún Ciclo Escolar configurado para '+Ext._razon_social,
                            buttons: Ext.MessageBox.OK
                        });
                        //me.view.unmask();
                    }else
                    {
                        // Ext.getCmp('cicloCmb').setStore('CiclosEscolaresStore');
                        Ext.getCmp('cicloCmb').disabled = false;
                        Ext.getCmp('cicloCmb').setValue('');
                        //Ext.getCmp('tabPrin').reload();

                    }
                }
            });

            Ext.getStore('TiposMovimientosStore').load({
                params:{
                    'id_ins': Ext._id_institucion
                },
            });

            Ext.getStore('UsoCFDIStore').load({
                params:{
                    'id_ins': Ext._id_institucion
                },
            });

            Ext.getStore('BancosStore').load({
                params:{
                    'id_ins': Ext._id_institucion
                },
            });


            Ext.getStore('AlumnosStore').load({
                params:{
                    'id_familia': 0

                },

            });


            Ext.getStore('DatosFactStore').load({
                params:{
                    'id_alumno': 0
                },
            });


            Ext.getStore('RolesStore').load({
                params:{
                    'id_ins': Ext._id_institucion
                },
            });
            Ext.getStore('FormasPagoStore').load({
                params:{
                    'id_ins': Ext._id_institucion
                },
            });


            Ext.getStore('FamiliasFacStore').load({
                params:{
                    'id_ins': Ext._id_institucion,
                    'id_ciclo_escolar': Ext._id_ciclo_escolar
                },
            });


            if (Ext._imagen!==""){
                Ext.getCmp('imgLogoIns').setSrc("api/webroot/"+Ext._imagen);
            }else{
                Ext.getCmp('imgLogoIns').setSrc("api/webroot/sinfoto.png");
            }


        }
    },

    onCicloCmbChange: function(field, newValue, oldValue, eOpts) {
        var lengthRecord = field.lastSelectedRecords;
        console.log(lengthRecord);

        if(lengthRecord !== null){
            Ext._id_ciclo_escolar= lengthRecord[0].data.id_ciclo_escolar;
            console.log(Ext._id_ciclo_escolar);
        }
        Ext.getStore('CuotasColegiaturaStore').load({
            params:{
                'id_ins': Ext._id_institucion,
                'id_ciclo_escolar' : Ext._id_ciclo_escolar

            },
        });

        Ext.getStore('CuotasInscripcionStore').load({
            params:{
                'id_ins': Ext._id_institucion,
                'id_ciclo_escolar': Ext._id_ciclo_escolar
            },
        });

        Ext.getStore('CuotasTransporteStore').load({
            params:{
                'id_ins': Ext._id_institucion,
                'id_ciclo_escolar': Ext._id_ciclo_escolar
            },
        });



        Ext.getStore('FamiliasStore').load({
            params:{
                'id_ins': Ext._id_institucion,
                'id_ciclo_escolar': Ext._id_ciclo_escolar
            },
        });

        Ext.getStore('CarnetsInsStore').load({
            params:{
                'id_ins': Ext._id_institucion,
                'id_ciclo_escolar': Ext._id_ciclo_escolar
            },
        });

        Ext.getStore('CarnetsColStore').load({
            params:{
                'id_ins': Ext._id_institucion,
                'id_ciclo_escolar': Ext._id_ciclo_escolar
            },
        });

        Ext.getStore('TransporteAlumnoStore').load({
            params:{
                'id_alumno': 0
            },
        });

        Ext.getStore('FamiliasStore').load({
            params:{
                'id_ins': Ext._id_institucion,
                'id_ciclo_escolar': Ext._id_ciclo_escolar
            },
        });

        Ext.getStore('CapturaCobrosStore').load({
            params:{
                'id_institucion': Ext._id_institucion,
                'id_ciclo_escolar': Ext._id_ciclo_escolar
            },
        });

        Ext.getStore('PromocionesInsStore').load({
            params:{
                'id_ins': Ext._id_institucion,
                'id_ciclo_escolar': Ext._id_ciclo_escolar,
                'id_cuota_inscripcion': 0
            },
        });


        Ext.getStore('CarnetsAlumnosStore').load({
            params:{
                'id_institucion': Ext._id_institucion,
                'id_ciclo_escolar': Ext._id_ciclo_escolar
            }
        });


        Ext.getStore('CarnetsColStore').load({
            params:{
                'id_alumno': 0,
                'id_institucion': Ext._id_institucion,
                'id_ciclo_escolar': Ext._id_ciclo_escolar

            }
        });

        Ext.getStore('AnualidadStore').load({
            params:{
                'id_institucion': Ext._id_institucion,
                'id_ciclo_escolar': Ext._id_ciclo_escolar
            }
        });
    },

    onPanelAfterRender: function(component, eOpts) {

    },

    onPnlEsteAfterRender: function(component, eOpts) {
        var catalogos=[

        {
            id:'treePro',
            xtype: 'treepanel',
            title: 'Catálogos',
            icon:'resources/images/inventario.png',
            lines: false,
            collapsed: false,
            collapsible: true,
            rootVisible: false,
            border: false,
            listeners:{
                itemclick:function(view, record, item, index, e)
                {
                    if (record.get('id')=='Ins')
                    {
                        TabInstituciones();

                    }
                    else if (record.get('id')=='CicEsc')
                    {
                        TabCiclosEscolares();
                    }
                    else if (record.get('id')=='RolUsr')
                    {
                        TabRoles();
                    }
                    else if (record.get('id')=='ForPag')
                    {
                        TabFormasPago();
                    }
                    else if (record.get('id')=='CuoIns')
                    {
                        TabCuotasInscripcion();
                    }
                    else if (record.get('id')=='CuoCol')
                    {
                        TabCuotasColegiatura();
                    }
                    else if (record.get('id')=='CuoTra')
                    {
                        TabCuotasTransporte();
                    }
                    else if (record.get('id')=='CatEst')
                    {
                        TabEstatusIngreso();
                    }
                    else if (record.get('id')=='CatFech')
                    {
                        TabFecharCorte();
                    }
                    else if (record.get('id')=='CatBan')
                    {
                        TabBancos();
                    }
                    else if (record.get('id')=='CatUso')
                    {
                        TabUsoCFDI();
                    }
                    else if (record.get('id')=='CatTipo')
                    {
                        TabTiposMovimientos();
                    }


                }
            },
            root: {
                text: '',
                isTarget: false,
                expanded: true,
                checked: false,
                allowDrag: false,
                allowDrop: false,
                editable: false,
                qtip: 1,
                children: [
                {
                    id:'Ins',
                    text: 'Instituciones',
                    icon:'resources/images/instituciones.png',
                    leaf: true
                },
                {
                    id:'CicEsc',
                    text: 'Ciclos Escolares',
                    icon:'resources/images/ciclo.png',
                    leaf: true
                },
                {
                    id:'RolUsr',
                    text: 'Roles de Usuario',
                    icon:'resources/images/roles.png',
                    leaf: true
                },
                {
                    id:'ForPag',
                    text: 'Formas de Pago',
                    icon:'resources/images/pags.png',
                    leaf: true
                },
                {
                    id:'Usr',
                    text: 'Usuarios',
                    icon:'resources/images/usr.png',
                    leaf: true
                },
                {
                    id:'CuoCol',
                    text: 'Cuotas Colegiaturas',
                    icon:'resources/images/costo.png',
                    leaf: true
                },
                {
                    id:'CuoTra',
                    text: 'Cuotas Transportes',
                    icon:'resources/images/camion.png',
                    leaf: true
                },
                {
                    id:'CuoIns',
                    text: 'Cuotas Inscripciones',
                    icon:'resources/images/cuotas_inscripciones.png',
                    leaf: true
                },
                {
                    id:'CatEst',
                    text: 'Estatus Ingreso',
                    icon:'resources/images/estatus.png',
                    leaf: true
                },
                {
                    id:'CatFech',
                    text: 'Fechas de Corte',
                    icon:'resources/images/fecha_corte.png',
                    leaf: true
                },
                {
                    id:'CatBan',
                    text: 'Bancos',
                    icon:'resources/images/banco.png',
                    leaf: true
                },
                {
                    id:'CatUso',
                    text: 'Uso CFDI',
                    icon:'resources/images/uso.png',
                    leaf: true
                },
                {
                    id:'CatTipo',
                    text: 'Tipos de Movimientos',
                    icon:'resources/images/movimiento.png',
                    leaf: true
                }
                ]

            },

        }
        ];

        var operacion=[
        {
            id:'treeOp',
            xtype: 'treepanel',
            title: 'Operación',
            icon:'resources/images/operacion.png',
            lines: false,
            collapsed: false,
            collapsible: true,
            rootVisible: false,
            border: false,
            listeners:{
                itemclick:function(view, record, item, index, e)
                {
                    if (record.get('id')=='DatFact')
                    {
                        TabDatosFact();
                    }else if (record.get('id')=='DatACam')
                    {
                        TabCamion();
                    }else if (record.get('id')=='DatRef')
                    {
                        TabReferencias();
                    }else if (record.get('id')=='DatCarIns')
                    {
                        TabCarnetsIns();
                    }else if (record.get('id')=='DatCarCol')
                    {
                        TabCarnetsCol();
                    }else if (record.get('id')=='DatCap')
                    {
                        TabCapturaCobros();
                    }else if (record.get('id')=='DatPar')
                    {
                        TabParcialidades();
                    }else if (record.get('id')=='DatAnu')
                    {
                        TabAnualidades();
                    }

                }
            },
            root: {
                text: '',
                isTarget: false,
                expanded: true,
                checked: false,
                allowDrag: false,
                allowDrop: false,

                editable: false,
                qtip: 1,
                children: [
                {
                    id:'DatFact',
                    text: 'Datos de Facturación',
                    icon:'resources/images/datos_fact.png',
                    leaf: true
                },
                {
                    id:'DatACam',
                    text: 'Asignar Camión',
                    icon:'resources/images/camion.png',
                    leaf: true
                },
                {
                    id:'DatRef',
                    text: 'Referencias',
                    icon:'resources/images/menu_carnet.png',
                    leaf: true
                },
                {
                    id:'DatCarIns',
                    text: 'Carnets Inscripción',
                    icon:'resources/images/carnets_in.png',
                    leaf: true
                },
                {
                    id:'DatCarCol',
                    text: 'Carnets Colegiatura',
                    icon:'resources/images/carnets_col.png',
                    leaf: true
                },
                {
                    id:'DatCap',
                    text: 'Captura de cobros',
                    icon:'resources/images/cobro.png',
                    leaf: true
                },
                {
                    id:'DatPar',
                    text: 'Parcialidades',
                    icon:'resources/images/menu_carnet.png',
                    leaf: true
                },
                {
                    id:'DatAnu',
                    text: 'Anualidades',
                    icon:'resources/images/menu_carnet.png',
                    leaf: true
                }
                ]

            },
            loader: {
            }
        }




        ];



        var consultas=[

        {
            id:'treeCon',
            xtype: 'treepanel',
            title: 'Utilerías',
            icon:'resources/images/utilerias.png',
            lines: false,
            collapsed: false,
            collapsible: true,
            rootVisible: false,
            border: false,
            listeners:{
                itemclick:function(view, record, item, index, e)
                {
                    if (record.get('id')=='Cs')
                    {
                        FnSesion();
                    }

                }
            },
            root: {
                text: '',
                isTarget: false,
                expanded: true,
                checked: false,
                allowDrag: false,
                allowDrop: false,
                editable: false,
                qtip: 1,
                children: [
                {
                    id:'Man',
                    text: 'Manual De Operación',
                    icon:'resources/images/manual.png',
                    leaf: true
                },
                {
                    id:'Cs',
                    text: 'Cerrar Sesión',
                    icon:'resources/images/salir.png',
                    leaf: true
                }
                ]

            },
            loader: {
            }
        }
        ];
        var prov=[


        ];
        var pan=[
        {
            xtype: 'treepanel',
            title: 'Pantalla Completa',
            icon:'resources/images/pantalla.png',
            collapsed: true,
            collapsible: false,
            rootVisible: false,
            border: false,
            hideCollapseTool :true,
            listeners:{
                el: {
                    click: function() {
                        var docElm = document.documentElement;
                        if (docElm.requestFullscreen) {
                            docElm.requestFullscreen();
                        }
                        else if (docElm.mozRequestFullScreen) {
                            docElm.mozRequestFullScreen();
                        }
                        else if (docElm.webkitRequestFullScreen) {
                            docElm.webkitRequestFullScreen();
                        }
                    }
                }
            }
        }
        ];
        var sesion=[
        {
            id:'sesion',
            xtype: 'treepanel',
            title: 'Cerrar Sesion',
            icon:'resources/images/cerrarSesion.png',
            collapsed: true,
            collapsible: false,
            rootVisible: false,
            border: false,
            hideCollapseTool :true,
            listeners:{
                el: {
                    click: function() {
                        var id_usu = Ext.getStore("Login").getAt(0).data.id_usu;
                        //alert(id_usu);

                        var selLogin = Ext.getStore("Login");
                        var row2 = selLogin.getAt(0);
                        row2.set("id_usu",id_usu);
                        row2.set("clave",0);
                        selLogin.sync({
                            callback: function(records, operation, success)
                            {
                                window.location.reload();
                                //alert('cerro sesion');
                            }
                        });
                        //window.location.reload();
                    }
                },
                afterrender:function( tree, eOpts ){
                    var task2 = new Ext.util.DelayedTask(function(){
                        Ext.getCmp('PnlEste').collapse();
                    });
                    task2.delay(1500);
                }
            }
        }
        ];





        function TabInstituciones(){
            var tab=Ext.getCmp('tabPrin').getComponent('InstitucionesTab');
            if(!tab){
                tab = Ext.create('cartera.view.InstitucionesTab', {});
                Ext.getCmp('tabPrin').add(tab);
                Ext.getCmp('tabPrin').updateLayout();
                Ext.getCmp('tabPrin').setActiveTab(tab);
            }
            Ext.getCmp('tabPrin').setActiveTab(tab);
            Ext.getCmp('PnlEste').collapse();
        }



        function TabCiclosEscolares(){
            var tab=Ext.getCmp('tabPrin').getComponent('CiclosEscolaresTab');
            if(!tab){
                tab = Ext.create('cartera.view.CiclosEscolaresTab', {});
                Ext.getCmp('tabPrin').add(tab);
                Ext.getCmp('tabPrin').updateLayout();
                Ext.getCmp('tabPrin').setActiveTab(tab);
            }
            Ext.getCmp('tabPrin').setActiveTab(tab);
            Ext.getCmp('PnlEste').collapse();
        }

        function TabRoles(){
            var tab=Ext.getCmp('tabPrin').getComponent('RolesTab');
            if(!tab){
                tab = Ext.create('cartera.view.RolesTab', {});
                Ext.getCmp('tabPrin').add(tab);
                Ext.getCmp('tabPrin').updateLayout();
                Ext.getCmp('tabPrin').setActiveTab(tab);
            }
            Ext.getCmp('tabPrin').setActiveTab(tab);
            Ext.getCmp('PnlEste').collapse();
        }

        function TabFormasPago(){
            var tab=Ext.getCmp('tabPrin').getComponent('FormasPagoTab');
            if(!tab){
                tab = Ext.create('cartera.view.FormasPagoTab', {});
                Ext.getCmp('tabPrin').add(tab);
                Ext.getCmp('tabPrin').updateLayout();
                Ext.getCmp('tabPrin').setActiveTab(tab);
            }
            Ext.getCmp('tabPrin').setActiveTab(tab);
            Ext.getCmp('PnlEste').collapse();
        }

        function TabCuotasInscripcion(){
            var tab=Ext.getCmp('tabPrin').getComponent('CuotasInscripcionTab');
            if(!tab){
                tab = Ext.create('cartera.view.CuotasInscripcionTab', {});
                Ext.getCmp('tabPrin').add(tab);
                Ext.getCmp('tabPrin').updateLayout();
                Ext.getCmp('tabPrin').setActiveTab(tab);
            }
            Ext.getCmp('tabPrin').setActiveTab(tab);
            Ext.getCmp('PnlEste').collapse();
        }

        function TabCuotasColegiatura(){
            var tab=Ext.getCmp('tabPrin').getComponent('CuotasColegiaturaTab');
            if(!tab){
                tab = Ext.create('cartera.view.CuotasColegiaturaTab', {});
                Ext.getCmp('tabPrin').add(tab);
                Ext.getCmp('tabPrin').updateLayout();
                Ext.getCmp('tabPrin').setActiveTab(tab);
            }
            Ext.getCmp('tabPrin').setActiveTab(tab);
            Ext.getCmp('PnlEste').collapse();
        }

        function TabCuotasTransporte(){
            var tab=Ext.getCmp('tabPrin').getComponent('CuotasTransporteTab');
            if(!tab){
                tab = Ext.create('cartera.view.CuotasTransporteTab', {});
                Ext.getCmp('tabPrin').add(tab);
                Ext.getCmp('tabPrin').updateLayout();
                Ext.getCmp('tabPrin').setActiveTab(tab);
            }
            Ext.getCmp('tabPrin').setActiveTab(tab);
            Ext.getCmp('PnlEste').collapse();
        }

        function TabEstatusIngreso(){
            var tab=Ext.getCmp('tabPrin').getComponent('EstatusIngresoTab');
            if(!tab){
                tab = Ext.create('cartera.view.EstatusIngresoTab', {});
                Ext.getCmp('tabPrin').add(tab);
                Ext.getCmp('tabPrin').updateLayout();
                Ext.getCmp('tabPrin').setActiveTab(tab);
            }
            Ext.getCmp('tabPrin').setActiveTab(tab);
            Ext.getCmp('PnlEste').collapse();
        }

        function TabBancos(){
            var tab=Ext.getCmp('tabPrin').getComponent('BancosTab');
            if(!tab){
                tab = Ext.create('cartera.view.BancosTab', {});
                Ext.getCmp('tabPrin').add(tab);
                Ext.getCmp('tabPrin').updateLayout();
                Ext.getCmp('tabPrin').setActiveTab(tab);
            }
            Ext.getCmp('tabPrin').setActiveTab(tab);
            Ext.getCmp('PnlEste').collapse();
        }

        function TabDatosFact(){
            var tab=Ext.getCmp('tabPrin').getComponent('DatosFactTab');
            if(!tab){
                tab = Ext.create('cartera.view.DatosFactTab', {});
                Ext.getCmp('tabPrin').add(tab);
                Ext.getCmp('tabPrin').updateLayout();
                Ext.getCmp('tabPrin').setActiveTab(tab);
            }
            Ext.getCmp('tabPrin').setActiveTab(tab);
            Ext.getCmp('PnlEste').collapse();
        }

        function TabUsoCFDI(){
            var tab=Ext.getCmp('tabPrin').getComponent('UsoCFDITab');
            if(!tab){
                tab = Ext.create('cartera.view.UsoCFDITab', {});
                Ext.getCmp('tabPrin').add(tab);
                Ext.getCmp('tabPrin').updateLayout();
                Ext.getCmp('tabPrin').setActiveTab(tab);
            }
            Ext.getCmp('tabPrin').setActiveTab(tab);
            Ext.getCmp('PnlEste').collapse();
        }

        function TabCarnetsIns(){
            var tab=Ext.getCmp('tabPrin').getComponent('CarnetsInsTab');
            if(!tab){
                tab = Ext.create('cartera.view.CarnetsInsTab', {});
                Ext.getCmp('tabPrin').add(tab);
                Ext.getCmp('tabPrin').updateLayout();
                Ext.getCmp('tabPrin').setActiveTab(tab);
            }
            Ext.getCmp('tabPrin').setActiveTab(tab);
            Ext.getCmp('PnlEste').collapse();
        }

        function TabCarnetsCol(){
            var tab=Ext.getCmp('tabPrin').getComponent('CarnetsColTab');
            if(!tab){
                tab = Ext.create('cartera.view.CarnetsColTab', {});
                Ext.getCmp('tabPrin').add(tab);
                Ext.getCmp('tabPrin').updateLayout();
                Ext.getCmp('tabPrin').setActiveTab(tab);
            }
            Ext.getCmp('tabPrin').setActiveTab(tab);
            Ext.getCmp('PnlEste').collapse();
        }

        function TabCamion(){
            var tab=Ext.getCmp('tabPrin').getComponent('CamionTab');
            if(!tab){
                tab = Ext.create('cartera.view.CamionTab', {});
                Ext.getCmp('tabPrin').add(tab);
                Ext.getCmp('tabPrin').updateLayout();
                Ext.getCmp('tabPrin').setActiveTab(tab);
            }
            Ext.getCmp('tabPrin').setActiveTab(tab);
            Ext.getCmp('PnlEste').collapse();
        }

        function TabTiposMovimientos(){
            var tab=Ext.getCmp('tabPrin').getComponent('TiposMovimientosTab');
            if(!tab){
                tab = Ext.create('cartera.view.TiposMovimientosTab', {});
                Ext.getCmp('tabPrin').add(tab);
                Ext.getCmp('tabPrin').updateLayout();
                Ext.getCmp('tabPrin').setActiveTab(tab);
            }
            Ext.getCmp('tabPrin').setActiveTab(tab);
            Ext.getCmp('PnlEste').collapse();
        }

        function TabCapturaCobros(){
            var tab=Ext.getCmp('tabPrin').getComponent('CapturaCobrosTab');
            if(!tab){
                tab = Ext.create('cartera.view.CapturaCobrosTab', {});
                Ext.getCmp('tabPrin').add(tab);
                Ext.getCmp('tabPrin').updateLayout();
                Ext.getCmp('tabPrin').setActiveTab(tab);
            }
            Ext.getCmp('tabPrin').setActiveTab(tab);
            Ext.getCmp('PnlEste').collapse();
        }

        function TabParcialidades(){
            var tab=Ext.getCmp('tabPrin').getComponent('ParcialidadesTab');
            if(!tab){
                tab = Ext.create('cartera.view.ParcialidadesTab', {});
                Ext.getCmp('tabPrin').add(tab);
                Ext.getCmp('tabPrin').updateLayout();
                Ext.getCmp('tabPrin').setActiveTab(tab);
            }
            Ext.getCmp('tabPrin').setActiveTab(tab);
            Ext.getCmp('PnlEste').collapse();
        }

        function TabReferencias(){
            var tab=Ext.getCmp('tabPrin').getComponent('ReferenciasTab');
            if(!tab){
                tab = Ext.create('cartera.view.ReferenciasTab', {});
                Ext.getCmp('tabPrin').add(tab);
                Ext.getCmp('tabPrin').updateLayout();
                Ext.getCmp('tabPrin').setActiveTab(tab);
            }
            Ext.getCmp('tabPrin').setActiveTab(tab);
            Ext.getCmp('PnlEste').collapse();
        }

        function TabAnualidades(){
            var tab=Ext.getCmp('tabPrin').getComponent('AnualidadesTab');
            if(!tab){
                tab = Ext.create('cartera.view.AnualidadesTab', {});
                Ext.getCmp('tabPrin').add(tab);
                Ext.getCmp('tabPrin').updateLayout();
                Ext.getCmp('tabPrin').setActiveTab(tab);
            }
            Ext.getCmp('tabPrin').setActiveTab(tab);
            Ext.getCmp('PnlEste').collapse();
        }





        function FnSesion(){

            Ext.MessageBox.show({
                title : 'Cerrar Sesión',
                buttons : Ext.MessageBox.YESNO,
                msg : '¿Desea cerrar sesión?',
                icon : Ext.Msg.INFO,
                fn: function(btn){
                    if(btn === 'yes'){

                        Ext.getStore('LoginStore').removeAll();
                        Ext.getCmp('MainView').destroy();
                        var FormLogin = Ext.create('invcaf.view.LoginWindows');
                        FormLogin.show();


                    }
                }
            });

        }



        Ext.getCmp('PnlEste').add(catalogos);
        Ext.getCmp('PnlEste').add(operacion);
        Ext.getCmp('PnlEste').add(consultas);
        //Ext.getCmp('PnlEste').add(utilerias);

        /*var recLog = Ext.getStore('Login').getAt(0);
        var clave = recLog.get('clave');
        if(clave=='GP'){
        Ext.getCmp('PnlEste').add(permisosER);
        }*/
        /*for (var i = 0; i < Ext.getStore('UsuPriv').getCount(); i++)
        {
        var row = Ext.getStore('UsuPriv').getAt(i);
        var abre=row.get('abre');
        //Ext.getCmp('C'+header+'ADM').show();
        Ext.getCmp('PnlEste').add(eval(abre));
    }*/
    /*var recLog=Ext.getStore('Login').getAt(0);
    var id_usu=recLog.get('id_usu');
    Ext.getStore('UsuMan').load({
    params:{
    id_usu: id_usu
    },
    callback: function(records, operation, success) {
    var val=0;
    for (var j = 0; j < Ext.getStore('UsuMan').getCount(); j++)
    {
    var rec = Ext.getStore('UsuMan').getAt(j);
    var id_area=rec.get('id_area');
    if(id_area==16){*/

    //Ext.getCmp('panCatSuc').removeChild(record);
    //Ext.getCmp('panCatSuc').getRootNode().childNodes[0].attributes.children.shift();
    //}
    /*if(id_area!=3 && id_area!=8 && id_area!=9 && id_area!=10 && id_area!=11){
    //alert('entró');
    val++;
    break;
}*/
//}
//alert(val);
/*if(val>0){
Ext.getCmp('panCatSuc').setHidden(false);
}else{
Ext.getCmp('panCatSuc').setHidden(true);
}*/
/*}
});*/
    }

});
