/*
 * File: app/view/tabArtLisViewController2.js
 *
 * This file was generated by Sencha Architect
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 6.5.x Classic library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 6.5.x Classic. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('cartera.view.tabArtLisViewController2', {
    extend: 'Ext.app.ViewController',
    alias: 'controller.tabcomp',

    onBtnImpCompClick: function(button, e, eOpts) {
        var global = Ext.getCmp('rdGlobal').checked;
        //alert(global);
        new Ext.Window({
            title : "COMPARATIVA DE INVENTARIO FISICO VS KARDEX ",
            width : 990,
            maximizable: true,
            modal: true,
            height: 700,
            layout : 'fit',
            items : [{
                xtype : "component",
                autoEl : {
                    tag : "iframe",
                    src : 'pdf/pdf_comparativa.php?global='+global
                    //+'&idcolumna='+idcolumna+'&nivel='+nivel+
                    //'&origenbeca='+origenbeca+'&tiposolicitud='+tiposolicitud+'&tipobeca='+tipobeca+'&estatus='+estatus+
                    //'&grado='+grado
                }
            }]
        }).show();
    },

    onBtnExcel2Click: function(button, e, eOpts) {
        var global = Ext.getCmp('rdGlobal').checked;
        window.open("excel/excel_Comparativa.php?global="+global);
    },

    onRdGlobalChange: function(field, newValue, oldValue, eOpts) {
        if(newValue === true){
            Ext.getStore('ComparativaStore').load({
                params:{
                    'global': 1
                }
            });
        }
    },

    onRdDifChange: function(field, newValue, oldValue, eOpts) {
        if(newValue === true){
            Ext.getStore('ComparativaStore').load({
                params:{
                    'global': 0
                }
            });
        }

    },

    onGridcolumnAfterRender: function(component, eOpts) {
        //Ext.getStore('ComparativaStore').load();
        Ext.getStore('ComparativaStore').load({
            params:{
                'global': 1
            }
        });
        store = Ext.getStore("ComparativaStore");
        console.log(store.data.existe);
    },

    onTabCompAfterRender: function(component, eOpts) {
        Ext.getStore('ConfigStore').load({
            callback: function (records, operation, success){
                if(success === true){
                    Ext.MessageBox.show({
                        title: 'Validacion',
                        icon: Ext.MessageBox.INFO,
                        msg: 'No se ha generado ningún archivo físico para este mes',
                        buttons: Ext.MessageBox.OK,
                        fn : function(btn)
                        {
                            // alert(btn);
                            if (btn == 'ok')
                            {
                                Ext.getCmp('tabComp').close();

                            }
                        }
                    });
                    return false;

                }

            }


        });

    }

});
